[{"filePath":"E:\\Projects\\AimInelligence\\client\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\App.jsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'isSidebarOpen'. Either include it or remove the dependency array.","line":25,"column":6,"nodeType":"ArrayExpression","endLine":25,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [isSidebarOpen]","fix":{"range":[1009,1011],"text":"[isSidebarOpen]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport Sidebar from './components/Sidebar/Sidebar';\nimport ChatContainer from './components/Chat/ChatContainer';\nimport { ChatProvider } from './context/ChatContext';\nimport { ThemeProvider } from './context/ThemeContext';\nimport ModelSwitcher from './components/Common/ModelSwitcher';\nimport ThemeToggle from './components/Common/ThemeToggle';\nimport { PanelLeftOpen } from 'lucide-react';\n\nfunction App() {\n  const [isSidebarOpen, setIsSidebarOpen] = useState(window.innerWidth > 768);\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\n\n  // Handle window resize\n  useEffect(() => {\n    const handleResize = () => {\n      const mobile = window.innerWidth <= 768;\n      setIsMobile(mobile);\n      if (!mobile && !isSidebarOpen) {\n        // Automatically open sidebar on desktop if it's closed\n      }\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const toggleSidebar = () => setIsSidebarOpen(!isSidebarOpen);\n\n  return (\n    <ThemeProvider>\n      <ChatProvider>\n        <div className=\"flex h-screen bg-[var(--bg-primary)] text-[var(--text-primary)] overflow-hidden relative\">\n          {/* Mobile Backdrop */}\n          {isMobile && isSidebarOpen && (\n            <div\n              className=\"fixed inset-0 bg-black/50 z-30 transition-opacity duration-300 animate-fade-in-up\"\n              onClick={() => setIsSidebarOpen(false)}\n            />\n          )}\n\n          {/* Sidebar */}\n          <div className={`\n            fixed md:relative z-40 h-full transition-all duration-300 ease-out\n            ${isSidebarOpen ? 'translate-x-0 w-[280px]' : '-translate-x-full md:translate-x-0 w-0'}\n          `}>\n            <Sidebar isOpen={isSidebarOpen} toggle={toggleSidebar} />\n          </div>\n\n          {/* Main Content Area */}\n          <div className=\"flex-1 flex flex-col h-full relative min-w-0\">\n            {/* Premium Header Bar */}\n            <header className=\"absolute top-0 left-0 right-0 z-20 flex items-center justify-between px-4 py-3\">\n              {/* Left: Toggle Button */}\n              <div className=\"flex items-center gap-2\">\n                {!isSidebarOpen && (\n                  <button\n                    onClick={() => setIsSidebarOpen(true)}\n                    className=\"btn-icon\"\n                    aria-label=\"Open sidebar\"\n                  >\n                    <PanelLeftOpen className=\"w-5 h-5\" />\n                  </button>\n                )}\n              </div>\n\n              {/* Center: Logo & Model Selector */}\n              <div className=\"flex flex-col items-center gap-1\">\n                {!isSidebarOpen && (\n                  <div className=\"flex items-center justify-center mb-1\">\n                    <span className=\"text-xl font-bold tracking-tighter\">\n                      <span className=\"text-blue-500\">ai</span>\n                      <span className=\"text-[var(--text-primary)]\">fa</span>\n                    </span>\n                  </div>\n                )}\n                <div className=\"max-w-[200px] sm:max-w-none\">\n                  <ModelSwitcher />\n                </div>\n              </div>\n\n              {/* Right: Theme Toggle */}\n              <div className=\"flex items-center\">\n                <ThemeToggle />\n              </div>\n            </header>\n\n            {/* Chat Container */}\n            <ChatContainer />\n          </div>\n        </div>\n      </ChatProvider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\components\\Chat\\AttachmentPreview.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\components\\Chat\\ChatContainer.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  40 |         if (bottomRef.current) {\n  41 |             bottomRef.current.scrollIntoView({ behavior: 'auto' });\n> 42 |             setUserAutoScroll(true);\n     |             ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  43 |             setShowScrollButton(false); // Explicitly hide button\n  44 |         }\n  45 |     }, [currentConversationId]); // Trigger explicitly on conversation ID change","line":42,"column":13,"nodeType":null,"endLine":42,"endColumn":30},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  49 |         const lastMsg = messages[messages.length - 1];\n  50 |         if (lastMsg && lastMsg.role === 'user') {\n> 51 |             setUserAutoScroll(true);\n     |             ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  52 |             setShowScrollButton(false); // Explicitly hide button\n  53 |             if (bottomRef.current) {\n  54 |                 // Use smooth for user send action for better UX","line":51,"column":13,"nodeType":null,"endLine":51,"endColumn":30},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'messages'. Either include it or remove the dependency array.","line":58,"column":8,"nodeType":"ArrayExpression","endLine":58,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [messages, messages.length]","fix":{"range":[2108,2125],"text":"[messages, messages.length]"}}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  66 |             bottomRef.current.scrollIntoView({ behavior: 'auto', block: 'end' });\n  67 |             // If we are auto-scrolling, button should be hidden\n> 68 |             if (showScrollButton) setShowScrollButton(false);\n     |                                   ^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  69 |         }\n  70 |     }, [messages, streamingContent, thinkingContent, isThinking]); // Removed userAutoScroll from deps\n  71 |","line":68,"column":35,"nodeType":null,"endLine":68,"endColumn":54},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'showScrollButton' and 'userAutoScroll'. Either include them or remove the dependency array.","line":70,"column":8,"nodeType":"ArrayExpression","endLine":70,"endColumn":65,"suggestions":[{"desc":"Update the dependencies array to be: [messages, streamingContent, thinkingContent, isThinking, userAutoScroll, showScrollButton]","fix":{"range":[2732,2789],"text":"[messages, streamingContent, thinkingContent, isThinking, userAutoScroll, showScrollButton]"}}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useEffect } from 'react';\r\nimport { useChatContext } from '../../context/ChatContext';\r\nimport MessageItem from './MessageItem';\r\nimport InputArea from './InputArea';\r\nimport { ArrowDown, Sparkles, MessageCircle, Zap } from 'lucide-react';\r\n\r\nconst ChatContainer = () => {\r\n    const {\r\n        messages,\r\n        sendMessage,\r\n        stopStream,\r\n        isStreaming,\r\n        streamingContent,\r\n        thinkingContent,\r\n        thinkingDuration,\r\n        isThinking,\r\n        currentConversationId\r\n    } = useChatContext();\r\n\r\n    const bottomRef = useRef(null);\r\n    const scrollContainerRef = useRef(null);\r\n    const [showScrollButton, setShowScrollButton] = useState(false);\r\n    const [userAutoScroll, setUserAutoScroll] = useState(true);\r\n\r\n    // Combine historical messages with current streaming message\r\n    const displayMessages = [...messages];\r\n    if (isStreaming) {\r\n        displayMessages.push({\r\n            id: 'streaming-temp',\r\n            role: 'assistant',\r\n            content: streamingContent,\r\n            thinking: thinkingContent,\r\n            thinking_duration: thinkingDuration,\r\n            isStreaming: true\r\n        });\r\n    }\r\n\r\n    // Scroll to bottom on conversation change or initial load\r\n    useEffect(() => {\r\n        if (bottomRef.current) {\r\n            bottomRef.current.scrollIntoView({ behavior: 'auto' });\r\n            setUserAutoScroll(true);\r\n            setShowScrollButton(false); // Explicitly hide button\r\n        }\r\n    }, [currentConversationId]); // Trigger explicitly on conversation ID change\r\n\r\n    // Force auto-scroll when user sends a message (last message is user)\r\n    useEffect(() => {\r\n        const lastMsg = messages[messages.length - 1];\r\n        if (lastMsg && lastMsg.role === 'user') {\r\n            setUserAutoScroll(true);\r\n            setShowScrollButton(false); // Explicitly hide button\r\n            if (bottomRef.current) {\r\n                // Use smooth for user send action for better UX\r\n                bottomRef.current.scrollIntoView({ behavior: 'smooth' });\r\n            }\r\n        }\r\n    }, [messages.length]);\r\n\r\n    // Handle auto-scroll during streaming\r\n    useEffect(() => {\r\n        // Only trigger auto-scroll when content changes, not when userAutoScroll state changes\r\n        // This prevents the \"bounce back\" effect when manually scrolling to bottom\r\n        if (userAutoScroll && bottomRef.current) {\r\n            // Use auto (instant) during streaming to prevent jitter\r\n            bottomRef.current.scrollIntoView({ behavior: 'auto', block: 'end' });\r\n            // If we are auto-scrolling, button should be hidden\r\n            if (showScrollButton) setShowScrollButton(false);\r\n        }\r\n    }, [messages, streamingContent, thinkingContent, isThinking]); // Removed userAutoScroll from deps\r\n\r\n    // Handle scroll events\r\n    const handleScroll = () => {\r\n        if (scrollContainerRef.current) {\r\n            const { scrollTop, scrollHeight, clientHeight } = scrollContainerRef.current;\r\n            // Increased threshold to 250 to account for pb-48 (approx 192px) padding\r\n            const isNearBottom = scrollHeight - scrollTop - clientHeight < 250;\r\n\r\n            // Only update state if changed to prevent re-renders\r\n            if (isNearBottom !== userAutoScroll) {\r\n                setUserAutoScroll(isNearBottom);\r\n            }\r\n            if (!isNearBottom !== showScrollButton) {\r\n                setShowScrollButton(!isNearBottom);\r\n            }\r\n        }\r\n    };\r\n\r\n    const toBottom = () => {\r\n        if (bottomRef.current) {\r\n            bottomRef.current.scrollIntoView({ behavior: 'smooth' });\r\n            setUserAutoScroll(true);\r\n            setShowScrollButton(false);\r\n        }\r\n    };\r\n\r\n    const handleDelete = (id) => {\r\n        console.log(\"Delete message\", id);\r\n    };\r\n\r\n    const handleEdit = (id, newContent) => {\r\n        console.log(\"Edit message\", id, newContent);\r\n    };\r\n\r\n    // Suggestions for empty state\r\n    const suggestions = [\r\n        { icon: <MessageCircle className=\"w-4 h-4\" />, text: \"Explain quantum computing\", color: \"from-blue-500/20 to-cyan-500/20\" },\r\n        { icon: <Zap className=\"w-4 h-4\" />, text: \"Write Python code for a REST API\", color: \"from-amber-500/20 to-orange-500/20\" },\r\n        { icon: <Sparkles className=\"w-4 h-4\" />, text: \"Help me brainstorm ideas\", color: \"from-purple-500/20 to-pink-500/20\" },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"relative flex-1 flex flex-col h-full overflow-hidden bg-[var(--bg-primary)]\">\r\n            {/* Messages Area */}\r\n            <div\r\n                ref={scrollContainerRef}\r\n                onScroll={handleScroll}\r\n                className=\"flex-1 overflow-y-auto scrollbar-thin pb-44 md:pb-52 pt-20\"\r\n            >\r\n                {displayMessages.length === 0 ? (\r\n                    <div className=\"h-full flex flex-col items-center justify-center px-6 animate-fade-in-up py-20 max-w-4xl mx-auto\">\r\n                        {/* Hero Section */}\r\n                        <div className=\"relative mb-10\">\r\n                            <div className=\"absolute inset-0 bg-emerald-500/20 blur-3xl rounded-full\" />\r\n                            <div className=\"relative w-20 h-20 rounded-2xl  flex items-center justify-center shadow-2xl shadow-emerald-500/20 transform hover:rotate-6 transition-transform duration-500\">\r\n                                {/* <Sparkles className=\"w-10 h-10 text-white\" /> */}\r\n                                <span className=\"text-8xl font-bold tracking-tighter\">\r\n                                    <span className=\"text-blue-500\">ai</span>\r\n                                    <span className=\"text-[var(--text-primary)]\">fa</span>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <h1 className=\"text-3xl md:text-4xl font-extrabold mb-4 text-center tracking-tight text-[var(--text-primary)] leading-tight\">\r\n                            Welcome to <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400\">Aim Intelligence</span>\r\n                        </h1>\r\n\r\n                        <p className=\"text-[var(--text-secondary)] text-base md:text-lg mb-12 text-center max-w-lg font-medium leading-relaxed\">\r\n                            How can I assist you today? Choose a path below or start typing to begin our conversation.\r\n                        </p>\r\n\r\n                        {/* Suggestion Cards */}\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full px-2 mt-4\">\r\n                            {suggestions.map((suggestion, idx) => (\r\n                                <button\r\n                                    key={idx}\r\n                                    onClick={() => sendMessage(suggestion.text)}\r\n                                    className={`group flex flex-col items-start gap-4 p-5 rounded-2xl border border-[var(--border-color)] bg-[var(--bg-secondary)] hover:bg-[var(--bg-tertiary)] hover:border-[var(--border-hover)] hover:translate-y-[-4px] transition-all duration-300 text-left shadow-lg shadow-black/10`}\r\n                                >\r\n                                    <div className={`p-2.5 rounded-xl bg-gradient-to-br ${suggestion.color} group-hover:scale-110 transition-transform`}>\r\n                                        <span className=\"text-[var(--text-primary)]\">\r\n                                            {suggestion.icon}\r\n                                        </span>\r\n                                    </div>\r\n                                    <span className=\"text-[14px] font-semibold text-[var(--text-secondary)] group-hover:text-[var(--text-primary)] transition-colors leading-snug\">\r\n                                        {suggestion.text}\r\n                                    </span>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    displayMessages.map((msg, idx) => (\r\n                        <MessageItem\r\n                            key={msg.id}\r\n                            message={msg}\r\n                            onDelete={handleDelete}\r\n                            onEdit={handleEdit}\r\n                            isLast={idx === displayMessages.length - 1}\r\n                        />\r\n                    ))\r\n                )}\r\n                <div ref={bottomRef} className=\"h-4\" />\r\n            </div>\r\n\r\n            {/* Scroll to Bottom Button */}\r\n            {showScrollButton && (\r\n                <button\r\n                    onClick={toBottom}\r\n                    className=\"absolute bottom-48 left-1/2 -translate-x-1/2 p-3 rounded-full bg-[var(--bg-tertiary)] backdrop-blur-md border border-[var(--border-color)] shadow-2xl hover:bg-[var(--bg-hover)] hover:scale-110 active:scale-95 transition-all duration-300 z-10 animate-fade-in-up\"\r\n                    aria-label=\"Scroll to bottom\"\r\n                >\r\n                    <ArrowDown className=\"w-5 h-5 text-[var(--text-primary)]\" />\r\n                </button>\r\n            )}\r\n\r\n            {/* Input Area */}\r\n            <InputArea\r\n                onSend={sendMessage}\r\n                onStop={stopStream}\r\n                isStreaming={isStreaming}\r\n                disabled={isStreaming && !streamingContent && !isThinking}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatContainer;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\components\\Chat\\CodeBlock.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'monaco' is defined but never used.","line":27,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":49,"suggestions":[{"messageId":"removeVar","data":{"varName":"monaco"},"fix":{"range":[1072,1080],"text":""},"desc":"Remove unused variable 'monaco'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport Editor from '@monaco-editor/react';\r\nimport { Copy, Check, Play, Terminal, X } from 'lucide-react';\r\nimport { useTheme } from '../../context/ThemeContext';\r\n\r\nconst CodeBlock = ({ language = 'javascript', code }) => {\r\n    const { theme } = useTheme();\r\n    const [editableCode, setEditableCode] = useState(code);\r\n    const [copied, setCopied] = useState(false);\r\n    const [output, setOutput] = useState(null);\r\n    const [showConsole, setShowConsole] = useState(false);\r\n    const [isExecuting, setIsExecuting] = useState(false);\r\n    const [executionMode, setExecutionMode] = useState('client'); // 'client' or 'server'\r\n    const editorRef = useRef(null);\r\n\r\n    // Sync with prop changes if needed\r\n    useEffect(() => {\r\n        setEditableCode(code);\r\n    }, [code]);\r\n\r\n    const handleCopy = async () => {\r\n        await navigator.clipboard.writeText(editableCode);\r\n        setCopied(true);\r\n        setTimeout(() => setCopied(false), 2000);\r\n    };\r\n\r\n    const handleEditorDidMount = (editor, monaco) => {\r\n        editorRef.current = editor;\r\n\r\n        // Adjust height to content initially\r\n        const contentHeight = Math.max(100, Math.min(1000, editor.getContentHeight()));\r\n        editor.getDomNode().style.height = `${contentHeight}px`;\r\n        editor.layout();\r\n\r\n        // Listen for height changes\r\n        editor.onDidContentSizeChange(() => {\r\n            const newHeight = Math.max(100, Math.min(1000, editor.getContentHeight()));\r\n            editor.getDomNode().style.height = `${newHeight}px`;\r\n            editor.layout();\r\n        });\r\n    };\r\n\r\n    const handleRunClient = () => {\r\n        setShowConsole(true);\r\n        try {\r\n            const logs = [];\r\n            const mockConsole = {\r\n                log: (...args) => {\r\n                    logs.push(args.map(arg =>\r\n                        typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)\r\n                    ).join(' '));\r\n                }\r\n            };\r\n            const runCode = new Function('console', editableCode);\r\n            let result = runCode(mockConsole);\r\n            const outputText = logs.length > 0 ? logs.join('\\n') : (result !== undefined ? String(result) : 'Γ£ô Executed successfully');\r\n            setOutput({ type: 'success', content: outputText });\r\n        } catch (error) {\r\n            setOutput({ type: 'error', content: error.toString() });\r\n        }\r\n    };\r\n\r\n    const handleRunServer = async () => {\r\n        setShowConsole(true);\r\n        setIsExecuting(true);\r\n        setOutput({ type: 'info', content: 'Executing...' });\r\n\r\n        try {\r\n            const response = await fetch('/api/execute', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    language: language,\r\n                    code: editableCode\r\n                })\r\n            });\r\n\r\n            const result = await response.json();\r\n\r\n            if (result.success) {\r\n                setOutput({ type: 'success', content: result.output });\r\n            } else {\r\n                setOutput({ type: 'error', content: result.error });\r\n            }\r\n        } catch (error) {\r\n            setOutput({ type: 'error', content: `Execution failed: ${error.message}` });\r\n        } finally {\r\n            setIsExecuting(false);\r\n        }\r\n    };\r\n\r\n    const handleRun = () => {\r\n        if (executionMode === 'client' && (language === 'javascript' || language === 'js')) {\r\n            handleRunClient();\r\n        } else {\r\n            handleRunServer();\r\n        }\r\n    };\r\n\r\n    const canExecute = () => {\r\n        const supportedLanguages = ['javascript', 'js', 'python', 'py'];\r\n        return supportedLanguages.includes(language.toLowerCase());\r\n    };\r\n\r\n    // Map language names if necessary for Monaco\r\n    const getMonacoLanguage = (lang) => {\r\n        const map = {\r\n            'js': 'javascript',\r\n            'jsx': 'javascript',\r\n            'ts': 'typescript',\r\n            'tsx': 'typescript',\r\n            'py': 'python',\r\n            'sh': 'shell',\r\n            'bash': 'shell'\r\n        };\r\n        return map[lang.toLowerCase()] || lang.toLowerCase();\r\n    };\r\n\r\n    return (\r\n        <div className=\"code-block my-4 animate-fade-in-up border border-[var(--border-color)]\">\r\n            {/* Header */}\r\n            <div className=\"code-block-header border-b border-[var(--border-color)]\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"flex gap-1.5\">\r\n                        <span className=\"w-3 h-3 rounded-full bg-red-500/60\" />\r\n                        <span className=\"w-3 h-3 rounded-full bg-yellow-500/60\" />\r\n                        <span className=\"w-3 h-3 rounded-full bg-green-500/60\" />\r\n                    </div>\r\n                    <span className=\"font-mono text-[11px] uppercase tracking-wider\">{language}</span>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-1\">\r\n                    {canExecute() && (\r\n                        <>\r\n                            <button\r\n                                onClick={handleRun}\r\n                                disabled={isExecuting}\r\n                                className=\"flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-[11px] font-medium text-[var(--text-muted)] hover:text-emerald-400 hover:bg-emerald-500/10 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                title={executionMode === 'client' ? 'Run in browser' : 'Run on server'}\r\n                            >\r\n                                <Play className={`w-3 h-3 ${isExecuting ? 'animate-pulse' : ''}`} />\r\n                                {isExecuting ? 'Running...' : `Run ${executionMode === 'server' ? '(Server)' : '(Browser)'}`}\r\n                            </button>\r\n                            {(language === 'javascript' || language === 'js') && (\r\n                                <button\r\n                                    onClick={() => setExecutionMode(executionMode === 'client' ? 'server' : 'client')}\r\n                                    className=\"px-2 py-1 rounded-lg text-[10px] font-medium text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-white/5 transition-all\"\r\n                                    title=\"Toggle execution mode\"\r\n                                >\r\n                                    {executionMode === 'client' ? '≡ƒîÉ' : 'ΓÜÖ∩╕Å'}\r\n                                </button>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                    <button\r\n                        onClick={handleCopy}\r\n                        className=\"flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-[11px] font-medium text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-white/5 transition-all\"\r\n                        title=\"Copy code\"\r\n                    >\r\n                        {copied ? (\r\n                            <>\r\n                                <Check className=\"w-3 h-3 text-emerald-400\" />\r\n                                <span className=\"text-emerald-400\">Copied!</span>\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                <Copy className=\"w-3 h-3\" />\r\n                                Copy\r\n                            </>\r\n                        )}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Code Content */}\r\n            <div className=\"code-block-content p-0 overflow-hidden\" style={{ minHeight: '100px' }}>\r\n                <Editor\r\n                    height=\"100px\" // Managed by onMount\r\n                    language={getMonacoLanguage(language)}\r\n                    value={editableCode}\r\n                    onChange={(value) => setEditableCode(value)}\r\n                    theme={theme === 'dark' ? 'vs-dark' : 'vs-dark'}\r\n                    onMount={handleEditorDidMount}\r\n                    options={{\r\n                        readOnly: false,\r\n                        minimap: { enabled: false },\r\n                        scrollBeyondLastLine: false,\r\n                        fontSize: 14,\r\n                        lineHeight: 1.7,\r\n                        fontFamily: \"'JetBrains Mono', 'Fira Code', 'SF Mono', 'Consolas', monospace\",\r\n                        fontLigatures: true,\r\n                        renderLineHighlight: 'none',\r\n                        contextmenu: true,\r\n                        scrollbar: {\r\n                            vertical: 'hidden',\r\n                            horizontal: 'auto',\r\n                            horizontalScrollbarSize: 6\r\n                        },\r\n                        domReadOnly: false,\r\n                        automaticLayout: true,\r\n                        padding: { top: 20, bottom: 20 },\r\n                        lineNumbers: 'on',\r\n                        lineNumbersMinChars: 3,\r\n                        folding: false,\r\n                        wordWrap: 'on',\r\n                        cursorBlinking: 'smooth',\r\n                        cursorSmoothCaretAnimation: 'on',\r\n                        smoothScrolling: true\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            {/* Console Output */}\r\n            {showConsole && output && (\r\n                <div className=\"border-t border-[var(--border-color)] animate-fade-in-up\">\r\n                    <div className=\"flex items-center justify-between px-4 py-2.5 bg-[var(--bg-tertiary)]\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <Terminal className=\"w-3.5 h-3.5 text-[var(--text-muted)]\" />\r\n                            <span className=\"text-[11px] font-semibold text-[var(--text-muted)] uppercase tracking-wider\">\r\n                                Output\r\n                            </span>\r\n                        </div>\r\n                        <button\r\n                            onClick={() => setShowConsole(false)}\r\n                            className=\"p-1.5 rounded-lg hover:bg-[var(--bg-hover)] text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors\"\r\n                        >\r\n                            <X className=\"w-3.5 h-3.5\" />\r\n                        </button>\r\n                    </div>\r\n                    <div\r\n                        className={`px-5 py-4 text-sm font-mono overflow-auto max-h-48 ${output.type === 'error'\r\n                            ? 'bg-red-500/10 text-red-400 border-l-4 border-red-500'\r\n                            : output.type === 'info'\r\n                                ? 'bg-blue-500/10 text-blue-400 border-l-4 border-blue-500'\r\n                                : 'bg-emerald-500/10 text-emerald-400 border-l-4 border-emerald-500'\r\n                            }`}\r\n                        style={{ fontFamily: \"'JetBrains Mono', monospace\" }}\r\n                    >\r\n                        <pre className=\"whitespace-pre-wrap break-words leading-relaxed\">{output.content}</pre>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CodeBlock;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\components\\Chat\\InputArea.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\components\\Chat\\MessageItem.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isLast' is defined but never used.","line":12,"column":51,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":57,"suggestions":[{"messageId":"removeVar","data":{"varName":"isLast"},"fix":{"range":[497,505],"text":""},"desc":"Remove unused variable 'isLast'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'node' is defined but never used.","line":53,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"node"},"fix":{"range":[1888,1893],"text":""},"desc":"Remove unused variable 'node'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'node' is defined but never used.","line":67,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"node"},"fix":{"range":[2422,2427],"text":""},"desc":"Remove unused variable 'node'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'node' is defined but never used.","line":78,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":78,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"node"},"fix":{"range":[3009,3014],"text":""},"desc":"Remove unused variable 'node'."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport remarkGfm from 'remark-gfm';\r\nimport remarkMath from 'remark-math';\r\nimport rehypeKatex from 'rehype-katex';\r\nimport CodeBlock from './CodeBlock';\r\nimport ThinkingBlock from './ThinkingBlock';\r\nimport { Edit2, RotateCcw, Copy, Check, User, Bot, Trash2, File, ExternalLink } from 'lucide-react';\r\n\r\nimport 'katex/dist/katex.min.css';\r\n\r\nconst MessageItem = ({ message, onEdit, onDelete, isLast }) => {\r\n    const isUser = message.role === 'user';\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [editContent, setEditContent] = useState(message.content);\r\n    const [copied, setCopied] = useState(false);\r\n\r\n    const textareaRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (isEditing && textareaRef.current) {\r\n            textareaRef.current.style.height = 'auto';\r\n            textareaRef.current.style.height = textareaRef.current.scrollHeight + 'px';\r\n            textareaRef.current.focus();\r\n        }\r\n    }, [isEditing]);\r\n\r\n    const handleCopy = async () => {\r\n        await navigator.clipboard.writeText(message.content);\r\n        setCopied(true);\r\n        setTimeout(() => setCopied(false), 2000);\r\n    };\r\n\r\n    const handleSaveEdit = () => {\r\n        if (editContent.trim() !== message.content) {\r\n            onEdit(message.id, editContent);\r\n        }\r\n        setIsEditing(false);\r\n    };\r\n\r\n    const handleKeyDown = (e) => {\r\n        if (e.key === 'Enter' && !e.shiftKey) {\r\n            e.preventDefault();\r\n            handleSaveEdit();\r\n        } else if (e.key === 'Escape') {\r\n            setIsEditing(false);\r\n            setEditContent(message.content);\r\n        }\r\n    };\r\n\r\n    // Memoize the markdown components to prevent re-renders of code blocks\r\n    const markdownComponents = React.useMemo(() => ({\r\n        code({ node, inline, className, children, ...props }) {\r\n            const match = /language-(\\w+)/.exec(className || '');\r\n            return !inline && match ? (\r\n                <CodeBlock\r\n                    language={match[1]}\r\n                    code={String(children).replace(/\\n$/, '')}\r\n                />\r\n            ) : (\r\n                <code className={className} {...props}>\r\n                    {children}\r\n                </code>\r\n            );\r\n        },\r\n        // Math block rendering (display mode)\r\n        div({ node, className, children, ...props }) {\r\n            if (className === 'math math-display') {\r\n                return (\r\n                    <div className=\"math-display-wrapper my-6 py-5 px-6 rounded-2xl bg-gradient-to-br from-[var(--bg-secondary)] to-[var(--bg-tertiary)] border border-[var(--border-color)] shadow-lg overflow-x-auto\" {...props}>\r\n                        {children}\r\n                    </div>\r\n                );\r\n            }\r\n            return <div className={className} {...props}>{children}</div>;\r\n        },\r\n        // Inline math rendering\r\n        span({ node, className, children, ...props }) {\r\n            if (className === 'math math-inline') {\r\n                return (\r\n                    <span className=\"math-inline-wrapper px-1 py-0.5 rounded bg-[var(--bg-tertiary)] border border-[var(--border-color)]\" {...props}>\r\n                        {children}\r\n                    </span>\r\n                );\r\n            }\r\n            return <span className={className} {...props}>{children}</span>;\r\n        }\r\n    }), []);\r\n\r\n    return (\r\n        <div className={`message-container group py-8 md:py-10 ${isUser ? 'border-b border-[var(--border-color)]' : 'bg-[var(--bg-ai-message)] border-b border-[var(--border-color)]'} animate-fade-in-up`}>\r\n            <div className={`message-content flex gap-5 md:gap-8 ${isUser ? 'flex-row-reverse' : ''} max-w-4xl mx-auto px-6`}>\r\n                {/* Avatar */}\r\n                <div className=\"flex-shrink-0 pt-1\">\r\n                    <div className={`avatar ${isUser ? 'avatar-user' : 'avatar-ai'} w-9 h-9 md:w-10 md:h-10 rounded-xl shadow-xl transform transition-transform group-hover:scale-105`}>\r\n                        {isUser ? (\r\n                            <User className=\"w-5 h-5 text-white\" />\r\n                        ) : (\r\n                            <Bot className=\"w-5 h-5 text-white\" />\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className={`flex-1 min-w-0 flex flex-col space-y-4 ${isUser ? 'items-end' : ''}`}>\r\n                    {/* Author Name */}\r\n                    <div className={`flex items-center gap-3 ${isUser ? 'flex-row-reverse' : ''}`}>\r\n                        <span className=\"font-bold text-[13px] tracking-wide uppercase text-[var(--text-muted)]\">\r\n                            {isUser ? 'Personal AI' : 'Alfa Assistant'}\r\n                        </span>\r\n                        {message.isStreaming && (\r\n                            <span className=\"flex items-center gap-1.5 text-[11px] font-bold text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full uppercase tracking-tighter\">\r\n                                <span className=\"w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse\" />\r\n                                Processing\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Thinking Block */}\r\n                    {message.thinking && !isUser && (\r\n                        <div className=\"w-full\">\r\n                            <ThinkingBlock\r\n                                content={message.thinking}\r\n                                duration={message.thinking_duration}\r\n                                isStreaming={message.isStreaming && !message.content}\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Message Body */}\r\n                    {isEditing ? (\r\n                        <div className=\"input-container p-4 w-full\">\r\n                            <textarea\r\n                                ref={textareaRef}\r\n                                value={editContent}\r\n                                onChange={(e) => setEditContent(e.target.value)}\r\n                                onKeyDown={handleKeyDown}\r\n                                className=\"w-full bg-transparent resize-none focus:outline-none min-h-[80px] text-[15px] leading-relaxed text-[var(--text-primary)]\"\r\n                                rows={1}\r\n                            />\r\n                            <div className=\"flex justify-end gap-3 mt-4 pt-4 border-t border-[var(--border-color)]\">\r\n                                <button\r\n                                    onClick={() => setIsEditing(false)}\r\n                                    className=\"px-4 py-2 rounded-lg text-sm font-semibold text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors\"\r\n                                >\r\n                                    Discard\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleSaveEdit}\r\n                                    className=\"px-4 py-2 rounded-lg text-sm font-semibold bg-emerald-500 text-white hover:bg-emerald-600 transition-all shadow-lg shadow-emerald-500/20 active:scale-95\"\r\n                                >\r\n                                    Apply Changes\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"w-full\">\r\n                            <div className={`prose-chat max-w-none ${message.isStreaming ? 'cursor-blink' : ''}`}>\r\n                                <ReactMarkdown\r\n                                    remarkPlugins={[remarkGfm, remarkMath]}\r\n                                    rehypePlugins={[rehypeKatex]}\r\n                                    components={markdownComponents}\r\n                                >\r\n                                    {message.content}\r\n                                </ReactMarkdown>\r\n                            </div>\r\n\r\n                            {/* Attachments */}\r\n                            {message.attachments && message.attachments.length > 0 && (\r\n                                <div className=\"flex flex-wrap gap-3 mt-6\">\r\n                                    {message.attachments.map((file) => (\r\n                                        <a\r\n                                            key={file.id}\r\n                                            href={file.url}\r\n                                            target=\"_blank\"\r\n                                            rel=\"noopener noreferrer\"\r\n                                            className=\"group/file flex items-center gap-4 px-4 py-3 rounded-2xl border border-[var(--border-color)] bg-[var(--bg-secondary)] hover:bg-[var(--bg-tertiary)] hover:border-[var(--border-hover)] transition-all duration-300 shadow-lg\"\r\n                                        >\r\n                                            <div className=\"w-12 h-12 rounded-xl bg-[var(--bg-tertiary)] flex items-center justify-center overflow-hidden shadow-inner ring-1 ring-[var(--border-color)] group-hover/file:scale-105 transition-transform\">\r\n                                                {file.mimetype.startsWith('image/') ? (\r\n                                                    <img src={file.url} alt=\"\" className=\"w-full h-full object-cover\" />\r\n                                                ) : (\r\n                                                    <File className=\"w-6 h-6 text-[var(--text-muted)]\" />\r\n                                                )}\r\n                                            </div>\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <p className=\"text-[14px] font-bold text-[var(--text-primary)] truncate max-w-[180px]\" title={file.originalName}>\r\n                                                    {file.originalName}\r\n                                                </p>\r\n                                                <p className=\"text-[11px] font-bold text-[var(--text-muted)] uppercase tracking-widest mt-0.5\">\r\n                                                    {file.mimetype.split('/')[1]} ΓÇó {(file.size / 1024).toFixed(1)} KB\r\n                                                </p>\r\n                                            </div>\r\n                                            <div className=\"w-8 h-8 rounded-full bg-[var(--bg-hover)] flex items-center justify-center group-hover/file:bg-emerald-500/20 group-hover/file:text-emerald-400 transition-all\">\r\n                                                <ExternalLink className=\"w-4 h-4\" />\r\n                                            </div>\r\n                                        </a>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Action Buttons */}\r\n                    {!isEditing && (\r\n                        <div className=\"flex items-center gap-1.5 lg:opacity-0 lg:group-hover:opacity-100 transition-all duration-300 pt-2\">\r\n                            <button\r\n                                onClick={handleCopy}\r\n                                className=\"w-8 h-8 flex items-center justify-center rounded-lg text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-all\"\r\n                                title=\"Copy message\"\r\n                            >\r\n                                {copied ? <Check className=\"w-4 h-4 text-emerald-400\" /> : <Copy className=\"w-4 h-4\" />}\r\n                            </button>\r\n\r\n                            {isUser ? (\r\n                                <button\r\n                                    onClick={() => setIsEditing(true)}\r\n                                    className=\"w-8 h-8 flex items-center justify-center rounded-lg text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-all\"\r\n                                    title=\"Edit message\"\r\n                                >\r\n                                    <Edit2 className=\"w-4 h-4\" />\r\n                                </button>\r\n                            ) : (\r\n                                <button\r\n                                    onClick={() => onEdit(message.id, 'regenerate')}\r\n                                    className=\"w-8 h-8 flex items-center justify-center rounded-lg text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-hover)] transition-all\"\r\n                                    title=\"Regenerate response\"\r\n                                >\r\n                                    <RotateCcw className=\"w-4 h-4\" />\r\n                                </button>\r\n                            )}\r\n\r\n                            <button\r\n                                onClick={() => onDelete(message.id)}\r\n                                className=\"w-8 h-8 flex items-center justify-center rounded-lg text-[var(--text-muted)] hover:text-rose-400 hover:bg-rose-500/10 transition-all\"\r\n                                title=\"Delete message\"\r\n                            >\r\n                                <Trash2 className=\"w-4 h-4\" />\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Memoize the entire component\r\nexport default React.memo(MessageItem, (prevProps, nextProps) => {\r\n    // Only re-render if content, streaming state, or editing state changes\r\n    return (\r\n        prevProps.message.content === nextProps.message.content &&\r\n        prevProps.message.isStreaming === nextProps.message.isStreaming &&\r\n        prevProps.message.thinking === nextProps.message.thinking &&\r\n        prevProps.isLast === nextProps.isLast\r\n    );\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\components\\Chat\\ThinkingBlock.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\components\\Common\\ErrorBoundary.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":9,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[244,249],"text":""},"desc":"Remove unused variable 'error'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\nclass ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { hasError: false, error: null, errorInfo: null };\r\n    }\r\n\r\n    static getDerivedStateFromError(error) {\r\n        return { hasError: true };\r\n    }\r\n\r\n    componentDidCatch(error, errorInfo) {\r\n        this.setState({ error, errorInfo });\r\n        console.error(\"Uncaught error:\", error, errorInfo);\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hasError) {\r\n            return (\r\n                <div className=\"min-h-screen flex items-center justify-center bg-[#343541] text-white p-6\">\r\n                    <div className=\"max-w-xl w-full bg-[#444654] rounded-lg p-8 shadow-2xl border border-red-500/20\">\r\n                        <h1 className=\"text-2xl font-bold text-red-400 mb-4\">Something went wrong</h1>\r\n                        <p className=\"text-gray-300 mb-6\">The application crashed. Here are the details:</p>\r\n\r\n                        <pre className=\"bg-black/50 p-4 rounded text-red-300 text-sm overflow-auto max-h-60 mb-6 font-mono\">\r\n                            {this.state.error && this.state.error.toString()}\r\n                        </pre>\r\n\r\n                        <button\r\n                            onClick={() => window.location.reload()}\r\n                            className=\"bg-[#10a37f] hover:bg-[#0e906f] text-white px-4 py-2 rounded transition-colors\"\r\n                        >\r\n                            Reload Application\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nexport default ErrorBoundary;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\components\\Common\\Icons.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\components\\Common\\ModelSwitcher.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\components\\Common\\SettingsModal.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\components\\Common\\ThemeToggle.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\components\\Sidebar\\Sidebar.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isOpen' is defined but never used.","line":5,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"isOpen"},"fix":{"range":[229,236],"text":""},"desc":"Remove unused variable 'isOpen'."}]},{"ruleId":"no-unused-vars","severity":2,"message":"'id' is defined but never used.","line":27,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":28,"suggestions":[{"messageId":"removeVar","data":{"varName":"id"},"fix":{"range":[789,793],"text":""},"desc":"Remove unused variable 'id'."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { useChatContext } from '../../context/ChatContext';\r\nimport { Plus, MessageSquare, Trash2, Edit2, Check, X, Settings, LogOut, PanelLeftClose } from 'lucide-react';\r\n\r\nconst Sidebar = ({ isOpen, toggle }) => {\r\n    const {\r\n        conversations,\r\n        currentConversationId,\r\n        setCurrentConversationId,\r\n        createNewChat,\r\n        deleteConversation\r\n    } = useChatContext();\r\n\r\n    const [editingId, setEditingId] = useState(null);\r\n    const [editTitle, setEditTitle] = useState('');\r\n\r\n    const handleCreateNew = () => {\r\n        createNewChat();\r\n    };\r\n\r\n    const startEdit = (e, conv) => {\r\n        e.stopPropagation();\r\n        setEditingId(conv.id);\r\n        setEditTitle(conv.title);\r\n    };\r\n\r\n    const saveEdit = (e, id) => {\r\n        e.stopPropagation();\r\n        setEditingId(null);\r\n    };\r\n\r\n    const cancelEdit = (e) => {\r\n        e.stopPropagation();\r\n        setEditingId(null);\r\n    };\r\n\r\n    // Group conversations by date\r\n    const today = new Date();\r\n    const isToday = (date) => new Date(date).toDateString() === today.toDateString();\r\n    const isYesterday = (date) => {\r\n        const d = new Date(date);\r\n        const yesterday = new Date(today);\r\n        yesterday.setDate(yesterday.getDate() - 1);\r\n        return d.toDateString() === yesterday.toDateString();\r\n    };\r\n\r\n    const groupedConversations = {\r\n        today: conversations.filter(c => isToday(c.updatedAt || c.createdAt)),\r\n        yesterday: conversations.filter(c => isYesterday(c.updatedAt || c.createdAt)),\r\n        older: conversations.filter(c => !isToday(c.updatedAt || c.createdAt) && !isYesterday(c.updatedAt || c.createdAt))\r\n    };\r\n\r\n    const renderConversation = (conv) => (\r\n        <div\r\n            key={conv.id}\r\n            onClick={() => setCurrentConversationId(conv.id)}\r\n            className={`group sidebar-item relative overflow-hidden ${currentConversationId === conv.id ? 'active' : ''\r\n                }`}\r\n        >\r\n            <MessageSquare className=\"w-4 h-4 flex-shrink-0 opacity-60\" />\r\n\r\n            {editingId === conv.id ? (\r\n                <div className=\"flex-1 flex items-center gap-1.5\">\r\n                    <input\r\n                        value={editTitle}\r\n                        onClick={(e) => e.stopPropagation()}\r\n                        onChange={(e) => setEditTitle(e.target.value)}\r\n                        className=\"input-base bg-transparent py-1 px-2 text-xs\"\r\n                        autoFocus\r\n                    />\r\n                    <button onClick={(e) => saveEdit(e, conv.id)} className=\"text-emerald-500 hover:text-emerald-400 p-1\">\r\n                        <Check className=\"w-3.5 h-3.5\" />\r\n                    </button>\r\n                    <button onClick={cancelEdit} className=\"text-red-500 hover:text-red-400 p-1\">\r\n                        <X className=\"w-3.5 h-3.5\" />\r\n                    </button>\r\n                </div>\r\n            ) : (\r\n                <>\r\n                    <div className=\"flex-1 truncate pr-8 relative\">\r\n                        <span className=\"text-sm\">{conv.title || 'New Conversation'}</span>\r\n                        {/* Fade gradient */}\r\n                        <div className={`absolute right-0 top-0 h-full w-8 bg-gradient-to-l to-transparent ${currentConversationId === conv.id\r\n                            ? 'from-[var(--bg-tertiary)]'\r\n                            : 'from-[var(--bg-secondary)] group-hover:from-[var(--bg-hover)]'\r\n                            }`} />\r\n                    </div>\r\n\r\n                    {/* Action buttons */}\r\n                    {currentConversationId === conv.id && (\r\n                        <div className=\"absolute right-2 flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                            <button\r\n                                onClick={(e) => startEdit(e, conv)}\r\n                                className=\"p-1.5 rounded-md hover:bg-white/5 text-[var(--text-muted)] hover:text-[var(--text-primary)]\"\r\n                            >\r\n                                <Edit2 className=\"w-3.5 h-3.5\" />\r\n                            </button>\r\n                            <button\r\n                                onClick={(e) => { e.stopPropagation(); deleteConversation(conv.id); }}\r\n                                className=\"p-1.5 rounded-md hover:bg-red-500/10 text-[var(--text-muted)] hover:text-red-400\"\r\n                            >\r\n                                <Trash2 className=\"w-3.5 h-3.5\" />\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n\r\n    const renderSection = (title, items) => {\r\n        if (items.length === 0) return null;\r\n        return (\r\n            <div className=\"mb-4\">\r\n                <div className=\"text-[10px] font-semibold uppercase tracking-wider text-[var(--text-muted)] mb-2 px-3\">\r\n                    {title}\r\n                </div>\r\n                {items.map(renderConversation)}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"sidebar flex flex-col h-full w-full overflow-hidden bg-[var(--bg-secondary)] border-r border-[var(--border-color)]\">\r\n            {/* Header */}\r\n            <div className=\"relative flex items-center justify-center p-5 mb-2\">\r\n                <div className=\"flex items-center gap-2 group cursor-default\">\r\n                    <span className=\"text-4xl font-bold tracking-tighter\">\r\n                        <span className=\"text-blue-500\">ai</span>\r\n                        <span className=\"text-[var(--text-primary)]\">fa</span>\r\n                    </span>\r\n                </div>\r\n                <button\r\n                    onClick={toggle}\r\n                    className=\"btn-icon absolute right-4\"\r\n                    aria-label=\"Close sidebar\"\r\n                >\r\n                    <PanelLeftClose className=\"w-5 h-5\" />\r\n                </button>\r\n            </div>\r\n\r\n            {/* New Chat Button */}\r\n            <div className=\"px-4 mb-6\">\r\n                <button\r\n                    onClick={handleCreateNew}\r\n                    className=\"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-[var(--bg-tertiary)] border border-[var(--border-color)] hover:bg-[var(--bg-hover)] hover:border-emerald-500/30 transition-all duration-300 text-sm font-semibold text-[var(--text-secondary)] hover:text-emerald-500 group relative overflow-hidden active:scale-[0.98]\"\r\n                >\r\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-emerald-500/0 via-emerald-500/5 to-emerald-500/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000\" />\r\n                    <Plus className=\"w-4 h-4 transition-transform group-hover:rotate-90 duration-300\" />\r\n                    <span>New chat</span>\r\n                </button>\r\n            </div>\r\n\r\n            {/* Conversation List */}\r\n            <div className=\"flex-1 overflow-y-auto px-3 space-y-1 scrollbar-thin\">\r\n                {renderSection('Today', groupedConversations.today)}\r\n                {renderSection('Yesterday', groupedConversations.yesterday)}\r\n                {renderSection('Previous', groupedConversations.older)}\r\n\r\n                {conversations.length === 0 && (\r\n                    <div className=\"flex flex-col items-center justify-center py-12 px-4 text-center\">\r\n                        <MessageSquare className=\"w-10 h-10 text-[var(--text-muted)] mb-4\" />\r\n                        <p className=\"text-[var(--text-secondary)] text-[13px] font-medium\">No history yet</p>\r\n                        <p className=\"text-[var(--text-muted)] text-[11px] mt-1 max-w-[150px]\">Start a new conversation to see it here</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div className=\"p-4 mt-auto border-t border-[var(--border-color)] space-y-1 bg-[var(--bg-secondary)]/80 backdrop-blur-md\">\r\n                <button className=\"sidebar-item w-full hover:bg-[var(--bg-hover)]\">\r\n                    <Settings className=\"w-4 h-4 text-[var(--text-muted)]\" />\r\n                    <span>Settings</span>\r\n                </button>\r\n                <button className=\"sidebar-item w-full text-rose-500 hover:text-rose-400 hover:bg-rose-500/10 mt-1\">\r\n                    <LogOut className=\"w-4 h-4 opacity-70\" />\r\n                    <span>Log out</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Sidebar;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\context\\ChatContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":7,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":7,"endColumn":28},{"ruleId":"no-unused-vars","severity":2,"message":"'streamError' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":48,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"streamError"},"fix":{"range":[1695,1717],"text":""},"desc":"Remove unused variable 'streamError'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchModels'. Either include it or remove the dependency array.","line":59,"column":8,"nodeType":"ArrayExpression","endLine":59,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [fetchModels]","fix":{"range":[2030,2032],"text":"[fetchModels]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":102,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":102,"endColumn":21},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'currentConversationId' and 'messages.length'. Either include them or remove the dependency array.","line":189,"column":8,"nodeType":"ArrayExpression","endLine":189,"endColumn":21,"suggestions":[{"desc":"Update the dependencies array to be: [currentConversationId, isStreaming, messages.length]","fix":{"range":[6315,6328],"text":"[currentConversationId, isStreaming, messages.length]"}}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, useEffect } from 'react';\r\nimport { useStreamResponse } from '../hooks/useStreamResponse';\r\nimport { api } from '../services/api';\r\n\r\nconst ChatContext = createContext();\r\n\r\nexport const useChatContext = () => useContext(ChatContext);\r\n\r\nexport const ChatProvider = ({ children }) => {\r\n    const [conversations, setConversations] = useState([]);\r\n    const [currentConversationId, setCurrentConversationId] = useState(null);\r\n    // Load from localStorage, or null until models are fetched\r\n    const [currentModel, setCurrentModel] = useState(() => {\r\n        return localStorage.getItem('selectedModel') || null;\r\n    });\r\n    const [availableModels, setAvailableModels] = useState([]);\r\n    const [gpuStatus, setGpuStatus] = useState('checking');\r\n    const [messages, setMessages] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [settings, setSettings] = useState(() => {\r\n        const saved = localStorage.getItem('ai-settings');\r\n        return saved ? JSON.parse(saved) : {\r\n            temperature: 0.7,\r\n            topP: 1,\r\n            maxTokens: 4096,\r\n            systemPrompt: ''\r\n        };\r\n    });\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('ai-settings', JSON.stringify(settings));\r\n    }, [settings]);\r\n\r\n    const updateSettings = (newSettings) => {\r\n        setSettings(prev => ({ ...prev, ...newSettings }));\r\n    };\r\n\r\n    // Use the custom stream hook\r\n    const {\r\n        startStream,\r\n        stopStream,\r\n        isStreaming,\r\n        streamingContent,\r\n        thinkingContent,\r\n        isThinking,\r\n        thinkingDuration,\r\n        streamError\r\n    } = useStreamResponse();\r\n\r\n    // Fetch models and GPU status on mount\r\n    useEffect(() => {\r\n        fetchModels();\r\n        checkGPUStatus();\r\n\r\n        // Periodically check GPU status\r\n        const interval = setInterval(checkGPUStatus, 30000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    // Fetch initial conversations\r\n    useEffect(() => {\r\n        fetchConversations();\r\n    }, []);\r\n\r\n    // Load messages when conversation changes\r\n    useEffect(() => {\r\n        if (currentConversationId) {\r\n            loadMessages(currentConversationId);\r\n        } else {\r\n            setMessages([]);\r\n        }\r\n    }, [currentConversationId]);\r\n\r\n    const fetchModels = async () => {\r\n        try {\r\n            const data = await api.getModels();\r\n            const models = data.models || [];\r\n            setAvailableModels(models);\r\n\r\n            // Auto-select model: savedModel > defaultModel > first available\r\n            const savedModel = localStorage.getItem('selectedModel');\r\n            if (savedModel && models.find(m => m.name === savedModel)) {\r\n                setCurrentModel(savedModel);\r\n            } else if (data.defaultModel && models.find(m => m.name === data.defaultModel)) {\r\n                setCurrentModel(data.defaultModel);\r\n            } else if (models.length > 0 && !currentModel) {\r\n                // Select first available model if none set\r\n                setCurrentModel(models[0].name);\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to fetch models:', err);\r\n            // Don't set fake fallback models - let the UI show \"No models available\"\r\n            setAvailableModels([]);\r\n        }\r\n    };\r\n\r\n    const checkGPUStatus = async () => {\r\n        try {\r\n            const data = await api.getGPUStatus();\r\n            setGpuStatus(data.status);\r\n        } catch (err) {\r\n            setGpuStatus('disconnected');\r\n        }\r\n    };\r\n\r\n    const fetchConversations = async () => {\r\n        try {\r\n            setIsLoading(true);\r\n            const data = await api.getConversations();\r\n            setConversations(data);\r\n        } catch (err) {\r\n            console.error('Failed to fetch conversations:', err);\r\n            setError('Failed to load conversations');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const loadMessages = async (id) => {\r\n        try {\r\n            setIsLoading(true);\r\n            const data = await api.getConversation(id);\r\n            setMessages(data.messages || []);\r\n        } catch (err) {\r\n            console.error('Failed to load messages:', err);\r\n            setError('Failed to load messages');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const createNewChat = async () => {\r\n        try {\r\n            const data = await api.createConversation({ model: currentModel });\r\n            setConversations(prev => [data, ...prev]);\r\n            setCurrentConversationId(data.id);\r\n            setMessages([]);\r\n            return data.id;\r\n        } catch (err) {\r\n            console.error('Failed to create chat:', err);\r\n            return null;\r\n        }\r\n    };\r\n\r\n    const sendMessage = async (content, attachments = []) => {\r\n        let conversationId = currentConversationId;\r\n\r\n        // Create new chat if none selected\r\n        if (!conversationId) {\r\n            conversationId = await createNewChat();\r\n            if (!conversationId) return;\r\n        }\r\n\r\n        // Optimistic update\r\n        const userMessageId = `temp-${Date.now()}`;\r\n        const userMessage = {\r\n            id: userMessageId,\r\n            role: 'user',\r\n            content,\r\n            attachments,\r\n            created_at: new Date().toISOString()\r\n        };\r\n\r\n        setMessages(prev => [...prev, userMessage]);\r\n\r\n        // Start streaming response\r\n        try {\r\n            await startStream({\r\n                conversationId,\r\n                message: content,\r\n                model: currentModel,\r\n                options: settings,\r\n                attachments\r\n            });\r\n        } catch (err) {\r\n            console.error('Send message failed:', err);\r\n            setError(err.message);\r\n        }\r\n    };\r\n\r\n    // Refresh messages after stream ends\r\n    useEffect(() => {\r\n        if (!isStreaming && currentConversationId && messages.length > 0) {\r\n            // Re-fetch to ensure consistency with DB\r\n            loadMessages(currentConversationId);\r\n            fetchConversations(); // Update sidebar with new title if generated\r\n        }\r\n    }, [isStreaming]);\r\n\r\n    const deleteConversation = async (id) => {\r\n        try {\r\n            await api.deleteConversation(id);\r\n            setConversations(prev => prev.filter(c => c.id !== id));\r\n            if (currentConversationId === id) {\r\n                setCurrentConversationId(null);\r\n                setMessages([]);\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to delete conversation:', err);\r\n        }\r\n    };\r\n\r\n    const selectModel = (modelName) => {\r\n        setCurrentModel(modelName);\r\n        localStorage.setItem('selectedModel', modelName);\r\n    };\r\n\r\n    return (\r\n        <ChatContext.Provider value={{\r\n            conversations,\r\n            currentConversationId,\r\n            setCurrentConversationId,\r\n            currentModel,\r\n            setCurrentModel: selectModel,\r\n            availableModels,\r\n            gpuStatus,\r\n            messages,\r\n            setMessages,\r\n            sendMessage,\r\n            createNewChat,\r\n            deleteConversation,\r\n            isLoading,\r\n            isStreaming,\r\n            stopStream,\r\n            streamingContent,\r\n            thinkingContent,\r\n            isThinking,\r\n            thinkingDuration,\r\n            settings,\r\n            updateSettings,\r\n            error,\r\n            refreshModels: fetchModels\r\n        }}>\r\n            {children}\r\n        </ChatContext.Provider>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\context\\ThemeContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":5,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":5,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst ThemeContext = createContext();\r\n\r\nexport const useTheme = () => useContext(ThemeContext);\r\n\r\nexport const ThemeProvider = ({ children }) => {\r\n    // Use localStorage or default to dark (since ChatGPT is dark-ish)\r\n    const [theme, setTheme] = useState(() => {\r\n        const saved = localStorage.getItem('theme');\r\n        return saved || 'dark';\r\n    });\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('theme', theme);\r\n        document.documentElement.className = theme;\r\n    }, [theme]);\r\n\r\n    const toggleTheme = () => {\r\n        setTheme(prev => prev === 'dark' ? 'light' : 'dark');\r\n    };\r\n\r\n    return (\r\n        <ThemeContext.Provider value={{ theme, toggleTheme }}>\r\n            {children}\r\n        </ThemeContext.Provider>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\hooks\\useStreamResponse.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\src\\services\\api.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects\\AimInelligence\\client\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
